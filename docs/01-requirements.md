# 공통

오류는 {에러코드} {에러 이름}로 정의합니다.

## 기능적 요구사항
1. 로그인한 사용자라고 명시된 요구사항은 익명 사용자가 이용할 경우 403 FORBIDDEN이 반환된다.
2. 모든 요청에서 사용자를 식별해 익명, 로그인한 사용자를 구분한다.
   1. 사용자 식별은 X-USER-ID로 진행한다.
   2. 식별에 실패할 경우 401 UNAUTHORIZED를 반환한다.
   3. 존재하지 않는 사용자일 경우 401 UNAUTHORIZED를 반환한다. 
3. 조회를 제외한 모든 사용자의 동작은 기록됩니다.

## 비기능적 요구사항
1. 각 기능은 최대 1000ms 안에 수행돼어야한다.

---
# 브랜드

## 기능적 요구사항

1. 브랜드명은 한글, 영어대소문자, 숫자로 이루어져있다.
2. 모든 사용자는 브랜드 목록을 볼 수 있다.
3. 모든 사용자는 브랜드명으로 검색 후 브랜드 식별자를 선택할 수 있다.
    1. 브랜드명 조건에 맞지 않는 경우 400 BAD REQUEST가 반환된다.

---

# 상품

## 기능적 요구사항

1. 모든 사용자는 전체 상품 목록을 볼 수 있다.
    1. 모든 사용자는 브랜드 식별자와 상품명으로 상품 목록을 조회할 수 있다.
    2. 모든 사용자는 조회된 상품 목록을 좋아요 수, 가격, 등록일 순으로 정렬할 수 있다.
    3. 모든 사용자는 상품 목록에서 상품 식별자, 상품명, 좋아요 수, 가격, 품절 여부, 등록일을 확인할 수 있다.
    4. 로그인한 사용자는 상품 목록에서 자신이 상품에 좋아요한 여부를 확인할 수 있다.

2. 모든 사용자는 상품 식별자를 통해 상품 상세 정보를 볼 수 있다.
   1. 모든 사용자는 상품 상세 페이지에서 상품 식별자, 상품명, 좋아요 수, 가격, 구매 가능 여부, 등록일,
   2. 옵션 카테고리, 옵션 목록, 옵션 별 (재고, 추가 가격, 구매 가능 여부)를 볼 수 있다.
   
3. 로그인한 사용자는 자신이 좋아요한 상품 목록을 조회할 수 있다.
    1. 로그인한 사용자는 자신이 좋아요한 상품 목록에서 상품 식별자, 상품명, 좋아요 여부와 좋아요 개수, 가격, 품절 여부, 등록일을 확인할 수 있다.

4. 로그인한 사용자는 상품 식별자를 통해 상품에 좋아요를 추가할 수 있다.
    1. 이미 좋아요한 상태인 경우 상태가 변하지 않는다.
    2. 존재하지 않는 상품인 경우 404 NOT FOUND를 반환한다.

5. 로그인한 사용자는 상품 식별자를 통해 상품에 좋아요를 취소할 수 있다.
    1. 이미 좋아요 상태가 아닌 경우 상태가 변하지 않는다.
    2. 존재하지 않는 상품인 경우 404 NOT FOUND를 반환한다.
---
# 주문

## 기능적 요구사항

1. 로그인한 사용자는 SKU 식별자와 수량목록을 입력해 주문을 생성할 수 있다.
   1. 존재하지 않는 상품인 경우 404 NOT FOUND를 반환한다.
   2. 상품, SKU 품절이거나 재고가 부족할 경우 409 CONFLICT를 반환한다.

2. 로그인한 사용자는 자신의 결제가 완료된 주문 목록을 조회할 수 있다. 
   1. 사용자는 각 요소의 주문 식별자, 주문 상품 목록, 총 가격, 주문 생성일을 확인할 수 있다.
   2. 사용자는 주문 상품 목록에서 각 상품 식별자, SKU 식별자, 옵션 카테고리별 선택 옵션, 상품 가격, 옵션 별 추가 가격, 총 가격을 확인 할 수 있다.

# 결제

## 기능적 요구사항
1. 로그인한 사용자는 주문 생성 후 포인트 결제를 진행할 수 있다.
   1. 사용자의 포인트를 차감한다.
   2. 결제상태를 업데이트한다.
   3. SKU의 재고차감 및 상품, SKU 구매 가능 여부를 업데이트한다.
   4. 결제 완료된 주문정보 및 사용자정보는 외부 통계 플랫폼으로 전송된다.
   5. 존재하지 않는 주문, 결제건일 경우 404 NOT FOUND를 반환한다.
   6. 상품, SKU 정보가 변경된 경우 409 CONFLICT가 반환된 후 결제 페이지가 새로고침된다.
   7. 포인트 결제 시 포인트가 부족한 경우 409 CONFLICT가 반환된다.
