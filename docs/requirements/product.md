# 상품 요구사항

## 상품 목록 조회
사용자는 brandId eq 비교 및 가격, 좋아요, 등록순 정렬을 해서 상품 목록을 조회할 수 있다.

### 파라미터

#### 쿼리 스트링
1. brandId: 브랜드 식별자
2. sort: latest(default) / price_asc / likes_desc  
3. page: 1(default)
4. size: 20(default)



#### 파라미터 별 조건
모든 파라미터는 비어있을 수 있다.
1. brandId 
    1. 브랜드 식별자와 자료형이 같아야한다.
2. sort 
    1. ,로 구분하여 여러개 지정 가능하다
3. page
    1. 1보다 작을 수 없다.
4. size
    1. 1보다 작을 수 없다.

### 요구사항
- [ ] 파라미터 별 조건이 충족되지 않으면 400 BAD REQUEST가 반환된다.
- [ ] 성공 시 200 OK와 상품 목록이 반환된다.
    - [ ] 정렬 조건이 여러개일 때, 순차적으로 적용된다.

## 상품 단일 조회
사용자는 단일 상품을 조회할 수 있다.  
항목은 brand 정보, 좋아요 수, 상품 명, 가격, 재고량이 있다.  

### 파라미터
#### path variable
1. productId: 상품 식별자


#### 파라미터별 조건
1. productId
    1. 존재하는 상품이어야한다.


### 요구사항
- [ ] 존재하는 상품이 아니면 404 NOT FOUND를 반환한다.
    - [ ] 도메인 레이어에서 검증 실패 시 EntityNotFoundException을 던진다.
- [ ] 성공 시 200 OK와 브랜드 정보를 포함한 상품 정보를 반환한다.
    - [ ] 상품 서비스에서 상품 관련 정보를 반환한다.
    - [ ] 브랜드 서비스에서 brandId로 브랜드 관련 정보를 반환한다.
    - [ ] 상품 퍼사드에서 정보를 매핑해 반환한다.


## 좋아요 추가
로그인한 사용자는 상품에 좋아요 버튼을 눌러 좋아요를 추가할 수 있다.

### 파라미터
#### 헤더
1. X-USER-ID
#### path variable
1. productId: 상품의 식별자

#### 파라미터별 조건
1. X-USER-ID
    1. 존재하는 사용자여야한다.
2. productId
    1. 존재하는 상품이어야한다.
    2. 상품 식별자와 같은 자료형이어야한다.


### 요구사항
- [ ] X-USER-ID 사용자가 존재하지 않는 경우 404 NOT FOUND를 반환한다.
    - [ ] 도메인레이어에서 EntityNotFound 예외를 던진다.
- [ ] productId 상품이 존재하지 않는 경우 404 NOT FOUND를 반환한다.
    - [ ] 도메인레이어에서 EntityNotFound 예외를 던진다.
- [ ] 성공 시 201 CREATED와 productId, like 여부를 반환한다.
    - [ ] 여러번 동작해도 같은 결과가 반환돼야한다.


## 좋아요 제거
로그인한 사용자는 상품에 좋아요 버튼을 눌러 좋아요를 추가할 수 있다.

### 파라미터
#### 헤더
1. X-USER-ID
#### path variable
1. productId: 상품의 식별자

#### 파라미터별 조건
1. X-USER-ID
    1. 존재하는 사용자여야한다.
2. productId
    1. 존재하는 상품이어야한다.
    2. 상품 식별자와 같은 자료형이어야한다.


### 요구사항
- [ ] X-USER-ID 사용자가 존재하지 않는 경우 404 NOT FOUND를 반환한다.
    - [ ] 도메인레이어에서 EntityNotFound 예외를 던진다.
- [ ] productId 상품이 존재하지 않는 경우 404 NOT FOUND를 반환한다.
    - [ ] 도메인레이어에서 EntityNotFound 예외를 던진다.
- [ ] 성공 시 200 OK(204 NO CONTENT시 body 반환불가)와 productId, like 여부를 반환한다.
    - [ ] 여러번 동작해도 같은 결과가 반환돼야한다.